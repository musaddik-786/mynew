main.py

from fastapi import FastAPI
from fastapi.middleware.cors import CORSMiddleware
from fastapi_mcp import FastApiMCP

from router import router

app = FastAPI(title="Dummy MCP Server")

app.add_middleware(
    CORSMiddleware,
    allow_origins=["*"],
    allow_methods=["*"],
    allow_headers=["*"],
)

app.include_router(router)

# Expose all routes as MCP tools
FastApiMCP(
    app,
    include_operations=[
        "email_reader_mcp",
        "write_email_to_excel",
        "email_attachment_mcp",
        "layout_detection_mcp",
        "document_extract_mcp",
        "query_pdf_vectorizer_mcp",
        "attachment_summary_mcp",
    ]
).mount_http()

if __name__ == "__main__":
    import uvicorn
    uvicorn.run(app, host="0.0.0.0", port=9000)


router.py

from fastapi import APIRouter
from fastapi.responses import JSONResponse

router = APIRouter()


@router.post("/email_reader_mcp", operation_id="email_reader_mcp")
async def email_reader_mcp():
    return JSONResponse({
        "jsonrpc": "2.0",
        "id": 1,
        "result": {
            "subject": "Insurance Quote Request",
            "body": "This email is related to insurance"
        }
    })


@router.post("/write_email_to_excel", operation_id="write_email_to_excel")
async def write_email_to_excel():
    return JSONResponse({
        "jsonrpc": "2.0",
        "id": 1,
        "result": {"status": "written"}
    })


@router.post("/email_attachment_mcp", operation_id="email_attachment_mcp")
async def email_attachment_mcp():
    return JSONResponse({
        "jsonrpc": "2.0",
        "id": 1,
        "result": {
            "attachments": [
                {"blob_url": "accord_policy_1.pdf"},
                {"blob_url": "quote_details_1.pdf"}
            ]
        }
    })


@router.post("/layout_detection_mcp", operation_id="layout_detection_mcp")
async def layout_detection_mcp():
    return JSONResponse({
        "jsonrpc": "2.0",
        "id": 1,
        "result": {"layout": "ACORD"}
    })


@router.post("/document_extract_mcp", operation_id="document_extract_mcp")
async def document_extract_mcp():
    return JSONResponse({
        "jsonrpc": "2.0",
        "id": 1,
        "result": {
            "Document_Confidence_Score": 0.95
        }
    })


@router.post("/query_pdf_vectorizer_mcp", operation_id="query_pdf_vectorizer_mcp")
async def query_pdf_vectorizer_mcp():
    return JSONResponse({
        "jsonrpc": "2.0",
        "id": 1,
        "result": {"embedded": True}
    })


@router.post("/attachment_summary_mcp", operation_id="attachment_summary_mcp")
async def attachment_summary_mcp():
    return JSONResponse({
        "jsonrpc": "2.0",
        "id": 1,
        "result": {
            "summary": "All attachments summarized"
        }
    })




# -----------------------------
# ELIGIBILITY AGENT TOOLS
# -----------------------------
@router.post("/risk_type_checker_MCP", operation_id="risk_type_checker_MCP")
async def risk_type_checker():
   return JSONResponse({
       "jsonrpc": "2.0",
       "id": 1,
       "result": {
           "line_of_business": "Commercial Property"
       }
   })





@router.post("/renewal_checker_mcp", operation_id="renewal_checker_mcp")
async def renewal_checker():
   return JSONResponse({
       "jsonrpc": "2.0",
       "id": 1,
       "result": {
           "is_renewal": False
       }
   })

@router.post("/Licensing_and_Sanction_Checker_MCP",
            operation_id="Licensing_and_Sanction_Checker_MCP")
async def sanction_checker():
   return JSONResponse({
       "jsonrpc": "2.0",
       "id": 1,
       "result": {
           "is_Sanctioned": False
       }
   })

@router.post("/Json_Reader_Read", operation_id="Json_Reader_Read")
async def json_reader():
   return JSONResponse({
       "jsonrpc": "2.0",
       "id": 1,
       "result": {
           "policy_number": "POL123",
           "insured_name": "ABC Corp"
       }
   })


langgraphclient.py inside eligibilty_agent
import asyncio
from typing import TypedDict, Annotated
from langgraph.graph import StateGraph, START, END
from langgraph.graph.message import add_messages
from langgraph.prebuilt import ToolNode
from langchain_core.messages import AIMessage, SystemMessage
from langchain_mcp_adapters.client import MultiServerMCPClient
from langchain_openai.chat_models import AzureChatOpenAI

# -------------------------
# STATE
# -------------------------
class State(TypedDict):
   messages: Annotated[list, add_messages]

# -------------------------
# ROUTER
# -------------------------
def router(state: State):
   last = state["messages"][-1]
   if isinstance(last, AIMessage) and last.tool_calls:
       return "tools"
   if isinstance(last, AIMessage) and last.content:
       if "Continue" in last.content:
           return "agent"
       if "End" in last.content:
           return "end"
   return "end"

# -------------------------
# PROMPT LOADER
# -------------------------
def load_prompt():
   with open("prompt_eligibility.txt", "r", encoding="utf-8") as f:
       return f.read()

# -------------------------
# BUILD ELIGIBILITY GRAPH
# -------------------------
async def build_eligibility_graph():
   # Discover MCP tools dynamically
   mcp_client = MultiServerMCPClient({
       "dummy_mcp": {
           "url": "http://localhost:9000/mcp",
           "transport": "streamable_http",
       }
   })
   all_tools = await mcp_client.get_tools()
   # Boundary exists, behavior enforced by prompt
   eligibility_tools = all_tools
   model = AzureChatOpenAI(
    api_key="3w3,
    api_version="20ew",
    azure_deployment="g",
    azure_endpoint="https://agom/"
   )
   llm = model.bind_tools(eligibility_tools)
   prompt = load_prompt()
   async def agent_node(state: State):
       system = SystemMessage(content=prompt)
       response = await llm.ainvoke([system] + state["messages"])
       return {"messages": [response]}
   graph = StateGraph(State)
   graph.add_node("agent", agent_node)
   graph.add_node("tools", ToolNode(eligibility_tools))
   graph.add_edge(START, "agent")
   graph.add_conditional_edges(
       "agent",
       router,
       {
           "tools": "tools",
           "agent": "agent",
           "end": END,
       },
   )
   graph.add_edge("tools", "agent")
   return graph.compile()

# -------------------------
# LOCAL TEST RUN
# -------------------------
async def main():
   graph = await build_eligibility_graph()
   async for step in graph.astream(
       {"messages": ["Start eligibility check"]},
       config={"recursion_limit": 50},
   ):
       print(step)

if __name__ == "__main__":
   asyncio.run(main())

prompt_eligibility.txt inside eligibility_agent folder itself

You are EligibilityAgent in an insurance underwriting system.
You MUST strictly follow this workflow:
1. Call risk_type_checker_MCP
  - If Line of Business is Commercial Property → respond exactly: Continue
  - Else → respond exactly: End
2. Call renewal_checker_mcp
  - After tool finishes → respond exactly: Continue
3. Call Licensing_and_Sanction_Checker_MCP
  - If is_Sanctioned is False → respond exactly: Continue
  - If is_Sanctioned is True → respond exactly: End
4. Call Json_Reader_Read
  - After tool finishes → respond exactly: Continue
IMPORTANT RULES:
- Respond ONLY with Continue or End
- Do NOT add explanations
- Do NOT add punctuation


similarly langgraphclient.py of emailintentagent folder
import asyncio
from typing import TypedDict, Annotated

from langgraph.graph import StateGraph, START, END
from langgraph.graph.message import add_messages
from langgraph.prebuilt import ToolNode
from langchain_core.messages import AIMessage, SystemMessage

from langchain_mcp_adapters.client import MultiServerMCPClient
from langchain_openai.chat_models import AzureChatOpenAI


# -------------------------
# STATE
# -------------------------
class State(TypedDict):
    messages: Annotated[list, add_messages]


# -------------------------
# ROUTER
# -------------------------
def router(state: State):
    last = state["messages"][-1]

    if isinstance(last, AIMessage) and last.tool_calls:
        return "tools"

    if isinstance(last, AIMessage) and last.content:
        if "Continue" in last.content:
            return "agent"
        if "End" in last.content:
            return "end"

    return "end"


# -------------------------
# PROMPT LOADER
# -------------------------
def load_prompt():
    with open("prompt_email.txt", "r", encoding="utf-8") as f:
        return f.read()


# -------------------------
# BUILD EMAIL INTENT GRAPH
# -------------------------
async def build_email_intent_graph():

    # Discover MCP tools dynamically
    mcp_client = MultiServerMCPClient({
        "dummy_mcp": {
            "url": "http://localhost:9000/mcp",
            "transport": "streamable_http",
        }
    })

    all_tools = await mcp_client.get_tools()

    # NOTE:
    # Boundary filtering exists,
    # but behavior is controlled by PROMPT
    email_tools = all_tools

    model = AzureChatOpenAI(
        # AZURE_OPENAI_API_KEY="AHu
        # AZURE_OPENAI_ENDPOINT="https.com/"
        # AZURE_OPENAI_API_VERSION="2ew"
        # AZURE_OPENAI_CHAT_DEPLOYMENT="gis"
        api_key="Ab5CcpPYKuA",
        api_version="w",
        azure_deployment="",
        azure_endpoint=".com/"
    )

    llm = model.bind_tools(email_tools)
    prompt = load_prompt()

    async def agent_node(state: State):
        system = SystemMessage(content=prompt)
        response = await llm.ainvoke([system] + state["messages"])
        return {"messages": [response]}

    graph = StateGraph(State)

    graph.add_node("agent", agent_node)
    graph.add_node("tools", ToolNode(email_tools))

    graph.add_edge(START, "agent")

    graph.add_conditional_edges(
        "agent",
        router,
        {
            "tools": "tools",
            "agent": "agent",
            "end": END,
        },
    )

    graph.add_edge("tools", "agent")

    return graph.compile()


# -------------------------
# LOCAL TEST RUN
# -------------------------
async def main():
    graph = await build_email_intent_graph()

    async for step in graph.astream(
        {"messages": ["Start your task"]},
        config={"recursion_limit": 50},
    ):
        print(step)


if __name__ == "__main__":
    asyncio.run(main())

prompt_email.txt
You are EmailIntentAgent in an insurance underwriting system.

You MUST strictly follow this workflow:

1. Call email_reader_mcp
   - If email is NOT related to insurance → respond exactly: End
   - If related → respond exactly: Continue

2. Call write_email_to_excel
   - After tool finishes → respond exactly: Continue

3. Call email_attachment_mcp
   - After tool finishes → respond exactly: Continue

4. Call layout_detection_mcp ONLY for attachments containing
   'accord' OR 'quote'
   - After finishing → respond exactly: Continue

5. Call document_extract_mcp ONLY for ACORD documents
   - If confidence < 0.90 → End
   - Else → Continue

6. Call query_pdf_vectorizer_mcp
   - Respond Continue

7. Call attachment_summary_mcp
   - Respond Continue

IMPORTANT:
- Respond ONLY with Continue or End
- Do NOT add explanations
- Do NOT add punctuation



(venv) Jarvis@JarvisPhase2:~/Musaddique/project_root/eligibility_agent$ python3 langgraph_client.py
{'agent': {'messages': [AIMessage(content='', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 13, 'prompt_tokens': 432, 'total_tokens': 445, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_provider': 'openai', 'model_name': 'gpt-4.1-2025-04-14', 'system_fingerprint': 'fp_e05894342c', 'id': 'chatcmpl-DCh76PAaZo6YxBw2ENFDJOtbYPBPg', 'prompt_filter_results': [{'prompt_index': 0, 'content_filter_results': {'hate': {'filtered': False, 'severity': 'safe'}, 'jailbreak': {'filtered': False, 'detected': False}, 'self_harm': {'filtered': False, 'severity': 'safe'}, 'sexual': {'filtered': False, 'severity': 'safe'}, 'violence': {'filtered': False, 'severity': 'safe'}}}], 'finish_reason': 'tool_calls', 'logprobs': None, 'content_filter_results': {}}, id='lc_run--019c8e8b-8eca-7f92-be4f-a5025180a13f-0', tool_calls=[{'name': 'email_reader_mcp', 'args': {}, 'id': 'call_UEju8QTMri6XsfgM4idKpMuM', 'type': 'tool_call'}], invalid_tool_calls=[], usage_metadata={'input_tokens': 432, 'output_tokens': 13, 'total_tokens': 445, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
{'tools': {'messages': [ToolMessage(content=[{'type': 'text', 'text': '{\n  "jsonrpc": "2.0",\n  "id": 1,\n  "result": {\n    "subject": "Insurance Quote Request",\n    "body": "This email is related to insurance"\n  }\n}', 'id': 'lc_aa887cc9-c5ac-49e8-ba15-ecc7b48e8185'}], name='email_reader_mcp', id='333ab235-2911-46fc-9220-935590288d3a', tool_call_id='call_UEju8QTMri6XsfgM4idKpMuM')]}}
{'agent': {'messages': [AIMessage(content='End', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 3, 'prompt_tokens': 501, 'total_tokens': 504, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_provider': 'openai', 'model_name': 'gpt-4.1-2025-04-14', 'system_fingerprint': 'fp_e05894342c', 'id': 'chatcmpl-DCh77QgcGngfnSLpIVfsaU1F7h1pH', 'prompt_filter_results': [{'prompt_index': 0, 'content_filter_results': {'hate': {'filtered': False, 'severity': 'safe'}, 'jailbreak': {'filtered': False, 'detected': False}, 'self_harm': {'filtered': False, 'severity': 'safe'}, 'sexual': {'filtered': False, 'severity': 'safe'}, 'violence': {'filtered': False, 'severity': 'safe'}}}], 'finish_reason': 'stop', 'logprobs': None, 'content_filter_results': {'hate': {'filtered': False, 'severity': 'safe'}, 'protected_material_code': {'filtered': False, 'detected': False}, 'protected_material_text': {'filtered': False, 'detected': False}, 'self_harm': {'filtered': False, 'severity': 'safe'}, 'sexual': {'filtered': False, 'severity': 'safe'}, 'violence': {'filtered': False, 'severity': 'safe'}}}, id='lc_run--019c8e8b-9338-7ea2-8801-96b6866e58b5-0', tool_calls=[], invalid_tool_calls=[], usage_metadata={'input_tokens': 501, 'output_tokens': 3, 'total_tokens': 504, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
(venv) Jarvis@JarvisPhase2:~/Musaddique/project_root/eligibility_agent$ python3 langgraph_client.py
{'agent': {'messages': [AIMessage(content='', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 13, 'prompt_tokens': 432, 'total_tokens': 445, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_provider': 'openai', 'model_name': 'gpt-4.1-2025-04-14', 'system_fingerprint': 'fp_e05894342c', 'id': 'chatcmpl-DCh9nd9aSIRh8pJgCsIWtPJQXacJF', 'prompt_filter_results': [{'prompt_index': 0, 'content_filter_results': {'hate': {'filtered': False, 'severity': 'safe'}, 'jailbreak': {'filtered': False, 'detected': False}, 'self_harm': {'filtered': False, 'severity': 'safe'}, 'sexual': {'filtered': False, 'severity': 'safe'}, 'violence': {'filtered': False, 'severity': 'safe'}}}], 'finish_reason': 'tool_calls', 'logprobs': None, 'content_filter_results': {}}, id='lc_run--019c8e8e-18df-71b2-93d6-a1b607a7c286-0', tool_calls=[{'name': 'email_reader_mcp', 'args': {}, 'id': 'call_jtwTPSGs0MgaJdpF5oa6yaFm', 'type': 'tool_call'}], invalid_tool_calls=[], usage_metadata={'input_tokens': 432, 'output_tokens': 13, 'total_tokens': 445, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
{'tools': {'messages': [ToolMessage(content=[{'type': 'text', 'text': '{\n  "jsonrpc": "2.0",\n  "id": 1,\n  "result": {\n    "subject": "Insurance Quote Request",\n    "body": "This email is related to insurance"\n  }\n}', 'id': 'lc_64bbf903-82a2-4b83-b695-24973375d69b'}], name='email_reader_mcp', id='9dbfca84-e4ee-4723-8d1c-4d35deb3fad8', tool_call_id='call_jtwTPSGs0MgaJdpF5oa6yaFm')]}}
{'agent': {'messages': [AIMessage(content='End', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 3, 'prompt_tokens': 501, 'total_tokens': 504, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_provider': 'openai', 'model_name': 'gpt-4.1-2025-04-14', 'system_fingerprint': 'fp_e05894342c', 'id': 'chatcmpl-DCh9oqT6AkE0sPckFBuNVMj2bZT0x', 'prompt_filter_results': [{'prompt_index': 0, 'content_filter_results': {'hate': {'filtered': False, 'severity': 'safe'}, 'jailbreak': {'filtered': False, 'detected': False}, 'self_harm': {'filtered': False, 'severity': 'safe'}, 'sexual': {'filtered': False, 'severity': 'safe'}, 'violence': {'filtered': False, 'severity': 'safe'}}}], 'finish_reason': 'stop', 'logprobs': None, 'content_filter_results': {'hate': {'filtered': False, 'severity': 'safe'}, 'protected_material_code': {'filtered': False, 'detected': False}, 'protected_material_text': {'filtered': False, 'detected': False}, 'self_harm': {'filtered': False, 'severity': 'safe'}, 'sexual': {'filtered': False, 'severity': 'safe'}, 'violence': {'filtered': False, 'severity': 'safe'}}}, id='lc_run--019c8e8e-1d3a-7971-9841-94189b7f3291-0', tool_calls=[], invalid_tool_calls=[], usage_metadata={'input_tokens': 501, 'output_tokens': 3, 'total_tokens': 504, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
(venv) Jarvis@JarvisPhase2:~/Musaddique/project_root/eligibility_agent$ cd ..
(venv) Jarvis@JarvisPhase2:~/Musaddique/project_root$ cd email_intent_agent/
(venv) Jarvis@JarvisPhase2:~/Musaddique/project_root/email_intent_agent$ python3 langgraph_client.py 
{'agent': {'messages': [AIMessage(content='', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 13, 'prompt_tokens': 475, 'total_tokens': 488, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_provider': 'openai', 'model_name': 'gpt-4.1-2025-04-14', 'system_fingerprint': 'fp_b9041e10b4', 'id': 'chatcmpl-DChB4XS0RGOJqMhSAcMywDtkJvARh', 'prompt_filter_results': [{'prompt_index': 0, 'content_filter_results': {'hate': {'filtered': False, 'severity': 'safe'}, 'jailbreak': {'filtered': False, 'detected': False}, 'self_harm': {'filtered': False, 'severity': 'safe'}, 'sexual': {'filtered': False, 'severity': 'safe'}, 'violence': {'filtered': False, 'severity': 'safe'}}}], 'finish_reason': 'tool_calls', 'logprobs': None, 'content_filter_results': {}}, id='lc_run--019c8e8f-4e0a-7821-8a85-4889b359902e-0', tool_calls=[{'name': 'email_reader_mcp', 'args': {}, 'id': 'call_OuZadpX83DtK3V6O1UZMXvpB', 'type': 'tool_call'}], invalid_tool_calls=[], usage_metadata={'input_tokens': 475, 'output_tokens': 13, 'total_tokens': 488, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
{'tools': {'messages': [ToolMessage(content=[{'type': 'text', 'text': '{\n  "jsonrpc": "2.0",\n  "id": 1,\n  "result": {\n    "subject": "Insurance Quote Request",\n    "body": "This email is related to insurance"\n  }\n}', 'id': 'lc_0c193757-f919-450d-8a09-06bd22365b3d'}], name='email_reader_mcp', id='f25cfef4-a34d-48fc-8724-143780a516f5', tool_call_id='call_OuZadpX83DtK3V6O1UZMXvpB')]}}
{'agent': {'messages': [AIMessage(content='Continue', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 16, 'prompt_tokens': 544, 'total_tokens': 560, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_provider': 'openai', 'model_name': 'gpt-4.1-2025-04-14', 'system_fingerprint': 'fp_b9041e10b4', 'id': 'chatcmpl-DChB5DswCf3gPXV3E1ofeGnUrsUAP', 'prompt_filter_results': [{'prompt_index': 0, 'content_filter_results': {'hate': {'filtered': False, 'severity': 'safe'}, 'jailbreak': {'filtered': False, 'detected': False}, 'self_harm': {'filtered': False, 'severity': 'safe'}, 'sexual': {'filtered': False, 'severity': 'safe'}, 'violence': {'filtered': False, 'severity': 'safe'}}}], 'finish_reason': 'tool_calls', 'logprobs': None, 'content_filter_results': {'hate': {'filtered': False, 'severity': 'safe'}, 'protected_material_code': {'filtered': False, 'detected': False}, 'protected_material_text': {'filtered': False, 'detected': False}, 'self_harm': {'filtered': False, 'severity': 'safe'}, 'sexual': {'filtered': False, 'severity': 'safe'}, 'violence': {'filtered': False, 'severity': 'safe'}}}, id='lc_run--019c8e8f-53e7-7b81-aa35-2feb1bfca82d-0', tool_calls=[{'name': 'write_email_to_excel', 'args': {}, 'id': 'call_q4NVn68R3oR9SEre3sKL9sFV', 'type': 'tool_call'}], invalid_tool_calls=[], usage_metadata={'input_tokens': 544, 'output_tokens': 16, 'total_tokens': 560, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
{'tools': {'messages': [ToolMessage(content=[{'type': 'text', 'text': '{\n  "jsonrpc": "2.0",\n  "id": 1,\n  "result": {\n    "status": "written"\n  }\n}', 'id': 'lc_a05ca6ea-d321-4c27-a461-b98db2522cdd'}], name='write_email_to_excel', id='4e99fcc7-b81f-48d8-ab6c-1cfa95302e11', tool_call_id='call_q4NVn68R3oR9SEre3sKL9sFV')]}}
{'agent': {'messages': [AIMessage(content='Continue', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 16, 'prompt_tokens': 604, 'total_tokens': 620, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_provider': 'openai', 'model_name': 'gpt-4.1-2025-04-14', 'system_fingerprint': 'fp_b9041e10b4', 'id': 'chatcmpl-DChB71Em5FAFDmImeE0a1wuzm8d7T', 'prompt_filter_results': [{'prompt_index': 0, 'content_filter_results': {'hate': {'filtered': False, 'severity': 'safe'}, 'jailbreak': {'filtered': False, 'detected': False}, 'self_harm': {'filtered': False, 'severity': 'safe'}, 'sexual': {'filtered': False, 'severity': 'safe'}, 'violence': {'filtered': False, 'severity': 'safe'}}}], 'finish_reason': 'tool_calls', 'logprobs': None, 'content_filter_results': {'hate': {'filtered': False, 'severity': 'safe'}, 'protected_material_code': {'filtered': False, 'detected': False}, 'protected_material_text': {'filtered': False, 'detected': False}, 'self_harm': {'filtered': False, 'severity': 'safe'}, 'sexual': {'filtered': False, 'severity': 'safe'}, 'violence': {'filtered': False, 'severity': 'safe'}}}, id='lc_run--019c8e8f-5be1-7902-a690-ec2a2647d6be-0', tool_calls=[{'name': 'email_attachment_mcp', 'args': {}, 'id': 'call_qA3Z0eABasPzs2A6iBDgCSqm', 'type': 'tool_call'}], invalid_tool_calls=[], usage_metadata={'input_tokens': 604, 'output_tokens': 16, 'total_tokens': 620, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
{'tools': {'messages': [ToolMessage(content=[{'type': 'text', 'text': '{\n  "jsonrpc": "2.0",\n  "id": 1,\n  "result": {\n    "attachments": [\n      {\n        "blob_url": "accord_policy_1.pdf"\n      },\n      {\n        "blob_url": "quote_details_1.pdf"\n      }\n    ]\n  }\n}', 'id': 'lc_dfcb16af-6f62-43c1-9b31-3e0c075d0b2e'}], name='email_attachment_mcp', id='01e84f88-05ff-4012-8522-4783e925942d', tool_call_id='call_qA3Z0eABasPzs2A6iBDgCSqm')]}}
{'agent': {'messages': [AIMessage(content='Continue', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 62, 'prompt_tokens': 696, 'total_tokens': 758, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_provider': 'openai', 'model_name': 'gpt-4.1-2025-04-14', 'system_fingerprint': 'fp_b9041e10b4', 'id': 'chatcmpl-DChBA5cilFrTAgVR4O5YPUPZO1OvE', 'prompt_filter_results': [{'prompt_index': 0, 'content_filter_results': {'hate': {'filtered': False, 'severity': 'safe'}, 'jailbreak': {'filtered': False, 'detected': False}, 'self_harm': {'filtered': False, 'severity': 'safe'}, 'sexual': {'filtered': False, 'severity': 'safe'}, 'violence': {'filtered': False, 'severity': 'safe'}}}], 'finish_reason': 'tool_calls', 'logprobs': None, 'content_filter_results': {'hate': {'filtered': False, 'severity': 'safe'}, 'protected_material_code': {'filtered': False, 'detected': False}, 'protected_material_text': {'filtered': False, 'detected': False}, 'self_harm': {'filtered': False, 'severity': 'safe'}, 'sexual': {'filtered': False, 'severity': 'safe'}, 'violence': {'filtered': False, 'severity': 'safe'}}}, id='lc_run--019c8e8f-6598-7230-9089-fa37d09e4bb6-0', tool_calls=[{'name': 'layout_detection_mcp', 'args': {'blob_url': 'accord_policy_1.pdf'}, 'id': 'call_jDkpiCQ53bjXQ3u03UwAsTkY', 'type': 'tool_call'}, {'name': 'layout_detection_mcp', 'args': {'blob_url': 'quote_details_1.pdf'}, 'id': 'call_mw38oFCJUkXcrEUbpyNObXv1', 'type': 'tool_call'}], invalid_tool_calls=[], usage_metadata={'input_tokens': 696, 'output_tokens': 62, 'total_tokens': 758, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
{'tools': {'messages': [ToolMessage(content=[{'type': 'text', 'text': '{\n  "jsonrpc": "2.0",\n  "id": 1,\n  "result": {\n    "layout": "ACORD"\n  }\n}', 'id': 'lc_eca52bf8-fd18-4604-a2ae-98d73e347ce2'}], name='layout_detection_mcp', id='c7a1d2d0-3dea-4af2-bb13-d5c7303f19d6', tool_call_id='call_jDkpiCQ53bjXQ3u03UwAsTkY'), ToolMessage(content=[{'type': 'text', 'text': '{\n  "jsonrpc": "2.0",\n  "id": 1,\n  "result": {\n    "layout": "ACORD"\n  }\n}', 'id': 'lc_e69468f0-269c-4cb2-9266-5f2bc167bfda'}], name='layout_detection_mcp', id='57542cb7-8b58-4430-bfea-4d20efea3ee6', tool_call_id='call_mw38oFCJUkXcrEUbpyNObXv1')]}}
{'agent': {'messages': [AIMessage(content='', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 59, 'prompt_tokens': 822, 'total_tokens': 881, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_provider': 'openai', 'model_name': 'gpt-4.1-2025-04-14', 'system_fingerprint': 'fp_b9041e10b4', 'id': 'chatcmpl-DChBDMJ3xyI7Q42aWSrrzQ0g6CCZT', 'prompt_filter_results': [{'prompt_index': 0, 'content_filter_results': {'hate': {'filtered': False, 'severity': 'safe'}, 'jailbreak': {'filtered': False, 'detected': False}, 'self_harm': {'filtered': False, 'severity': 'safe'}, 'sexual': {'filtered': False, 'severity': 'safe'}, 'violence': {'filtered': False, 'severity': 'safe'}}}], 'finish_reason': 'tool_calls', 'logprobs': None, 'content_filter_results': {}}, id='lc_run--019c8e8f-6ffa-7643-a6d3-0bf304caad7f-0', tool_calls=[{'name': 'document_extract_mcp', 'args': {'blob_url': 'accord_policy_1.pdf'}, 'id': 'call_vQobxsvadxZjEG3rqxGUVvCr', 'type': 'tool_call'}, {'name': 'document_extract_mcp', 'args': {'blob_url': 'quote_details_1.pdf'}, 'id': 'call_uVuO8ssjcVCyYau23pc0Cy3R', 'type': 'tool_call'}], invalid_tool_calls=[], usage_metadata={'input_tokens': 822, 'output_tokens': 59, 'total_tokens': 881, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
{'tools': {'messages': [ToolMessage(content=[{'type': 'text', 'text': '{\n  "jsonrpc": "2.0",\n  "id": 1,\n  "result": {\n    "Document_Confidence_Score": 0.95\n  }\n}', 'id': 'lc_5bd1eeed-0870-48c2-983f-b82ce144331b'}], name='document_extract_mcp', id='f9dddcd6-b416-40a3-b5f8-e3a448e74978', tool_call_id='call_vQobxsvadxZjEG3rqxGUVvCr'), ToolMessage(content=[{'type': 'text', 'text': '{\n  "jsonrpc": "2.0",\n  "id": 1,\n  "result": {\n    "Document_Confidence_Score": 0.95\n  }\n}', 'id': 'lc_f8fda9ac-bfed-4e9d-9dc8-2654accc59ee'}], name='document_extract_mcp', id='b15caef5-e7c5-497f-8244-a9c89533f426', tool_call_id='call_uVuO8ssjcVCyYau23pc0Cy3R')]}}
{'agent': {'messages': [AIMessage(content='', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 63, 'prompt_tokens': 952, 'total_tokens': 1015, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_provider': 'openai', 'model_name': 'gpt-4.1-2025-04-14', 'system_fingerprint': 'fp_b9041e10b4', 'id': 'chatcmpl-DChBEkEcx0KlD415lhdfhXsQKCrti', 'prompt_filter_results': [{'prompt_index': 0, 'content_filter_results': {'hate': {'filtered': False, 'severity': 'safe'}, 'jailbreak': {'filtered': False, 'detected': False}, 'self_harm': {'filtered': False, 'severity': 'safe'}, 'sexual': {'filtered': False, 'severity': 'safe'}, 'violence': {'filtered': False, 'severity': 'safe'}}}], 'finish_reason': 'tool_calls', 'logprobs': None, 'content_filter_results': {}}, id='lc_run--019c8e8f-7676-7991-91b6-2018ad38b768-0', tool_calls=[{'name': 'query_pdf_vectorizer_mcp', 'args': {'blob_url': 'accord_policy_1.pdf'}, 'id': 'call_2Xthr1b2JOX4U0SvaNvjwVZE', 'type': 'tool_call'}, {'name': 'query_pdf_vectorizer_mcp', 'args': {'blob_url': 'quote_details_1.pdf'}, 'id': 'call_t9B2JD6RrxKh7063bMTnZrBx', 'type': 'tool_call'}], invalid_tool_calls=[], usage_metadata={'input_tokens': 952, 'output_tokens': 63, 'total_tokens': 1015, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
{'tools': {'messages': [ToolMessage(content=[{'type': 'text', 'text': '{\n  "jsonrpc": "2.0",\n  "id": 1,\n  "result": {\n    "embedded": true\n  }\n}', 'id': 'lc_227e8522-9969-4fca-ad7a-bb3906f8594c'}], name='query_pdf_vectorizer_mcp', id='7a9a0074-e228-45ed-89c6-682fcc8985ae', tool_call_id='call_2Xthr1b2JOX4U0SvaNvjwVZE'), ToolMessage(content=[{'type': 'text', 'text': '{\n  "jsonrpc": "2.0",\n  "id": 1,\n  "result": {\n    "embedded": true\n  }\n}', 'id': 'lc_c782a7fc-d5f0-4db8-842a-8a7b2039ce60'}], name='query_pdf_vectorizer_mcp', id='4ba86b3e-fe77-4d8d-b65c-9154aae3716f', tool_call_id='call_t9B2JD6RrxKh7063bMTnZrBx')]}}
{'agent': {'messages': [AIMessage(content='', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 61, 'prompt_tokens': 1072, 'total_tokens': 1133, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_provider': 'openai', 'model_name': 'gpt-4.1-2025-04-14', 'system_fingerprint': 'fp_b9041e10b4', 'id': 'chatcmpl-DChBGDzeZUWyDD3ZkghSHV4AcKs7P', 'prompt_filter_results': [{'prompt_index': 0, 'content_filter_results': {'hate': {'filtered': False, 'severity': 'safe'}, 'jailbreak': {'filtered': False, 'detected': False}, 'self_harm': {'filtered': False, 'severity': 'safe'}, 'sexual': {'filtered': False, 'severity': 'safe'}, 'violence': {'filtered': False, 'severity': 'safe'}}}], 'finish_reason': 'tool_calls', 'logprobs': None, 'content_filter_results': {}}, id='lc_run--019c8e8f-7d29-78d2-a0b5-1845f02d6a2e-0', tool_calls=[{'name': 'attachment_summary_mcp', 'args': {'blob_url': 'accord_policy_1.pdf'}, 'id': 'call_4bdGiYm1qZ1Ih3u0d6o0NNNZ', 'type': 'tool_call'}, {'name': 'attachment_summary_mcp', 'args': {'blob_url': 'quote_details_1.pdf'}, 'id': 'call_ZRmpf3f6CQLBAVtRHfiGIDO7', 'type': 'tool_call'}], invalid_tool_calls=[], usage_metadata={'input_tokens': 1072, 'output_tokens': 61, 'total_tokens': 1133, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
{'tools': {'messages': [ToolMessage(content=[{'type': 'text', 'text': '{\n  "jsonrpc": "2.0",\n  "id": 1,\n  "result": {\n    "summary": "All attachments summarized"\n  }\n}', 'id': 'lc_cb75b390-fa69-4d3d-baec-f505e41a0c42'}], name='attachment_summary_mcp', id='e37692fd-5350-4c7b-afc3-0113191c6bf1', tool_call_id='call_4bdGiYm1qZ1Ih3u0d6o0NNNZ'), ToolMessage(content=[{'type': 'text', 'text': '{\n  "jsonrpc": "2.0",\n  "id": 1,\n  "result": {\n    "summary": "All attachments summarized"\n  }\n}', 'id': 'lc_1160739c-ac27-4be4-bc2c-52676f4fc1eb'}], name='attachment_summary_mcp', id='e77f650a-db12-4be0-9ea0-42417c387ee6', tool_call_id='call_ZRmpf3f6CQLBAVtRHfiGIDO7')]}}
{'agent': {'messages': [AIMessage(content='Continue', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 3, 'prompt_tokens': 1197, 'total_tokens': 1200, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 1024}}, 'model_provider': 'openai', 'model_name': 'gpt-4.1-2025-04-14', 'system_fingerprint': 'fp_b9041e10b4', 'id': 'chatcmpl-DChBIiXyLQSYdFpDgCNnOyjtgOjjl', 'prompt_filter_results': [{'prompt_index': 0, 'content_filter_results': {'hate': {'filtered': False, 'severity': 'safe'}, 'jailbreak': {'filtered': False, 'detected': False}, 'self_harm': {'filtered': False, 'severity': 'safe'}, 'sexual': {'filtered': False, 'severity': 'safe'}, 'violence': {'filtered': False, 'severity': 'safe'}}}], 'finish_reason': 'stop', 'logprobs': None, 'content_filter_results': {'hate': {'filtered': False, 'severity': 'safe'}, 'protected_material_code': {'filtered': False, 'detected': False}, 'protected_material_text': {'filtered': False, 'detected': False}, 'self_harm': {'filtered': False, 'severity': 'safe'}, 'sexual': {'filtered': False, 'severity': 'safe'}, 'violence': {'filtered': False, 'severity': 'safe'}}}, id='lc_run--019c8e8f-8356-78a3-b170-3a724d2507bc-0', tool_calls=[], invalid_tool_calls=[], usage_metadata={'input_tokens': 1197, 'output_tokens': 3, 'total_tokens': 1200, 'input_token_details': {'audio': 0, 'cache_read': 1024}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
{'agent': {'messages': [AIMessage(content='Continue', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 3, 'prompt_tokens': 1202, 'total_tokens': 1205, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_provider': 'openai', 'model_name': 'gpt-4.1-2025-04-14', 'system_fingerprint': 'fp_b9041e10b4', 'id': 'chatcmpl-DChBJDSTEpjiQpoRYM9hkTzbb8XQ6', 'prompt_filter_results': [{'prompt_index': 0, 'content_filter_results': {'hate': {'filtered': False, 'severity': 'safe'}, 'jailbreak': {'filtered': False, 'detected': False}, 'self_harm': {'filtered': False, 'severity': 'safe'}, 'sexual': {'filtered': False, 'severity': 'safe'}, 'violence': {'filtered': False, 'severity': 'safe'}}}], 'finish_reason': 'stop', 'logprobs': None, 'content_filter_results': {'hate': {'filtered': False, 'severity': 'safe'}, 'protected_material_code': {'filtered': False, 'detected': False}, 'protected_material_text': {'filtered': False, 'detected': False}, 'self_harm': {'filtered': False, 'severity': 'safe'}, 'sexual': {'filtered': False, 'severity': 'safe'}, 'violence': {'filtered': False, 'severity': 'safe'}}}, id='lc_run--019c8e8f-8812-7d42-ab67-b4d910384f18-0', tool_calls=[], invalid_tool_calls=[], usage_metadata={'input_tokens': 1202, 'output_tokens': 3, 'total_tokens': 1205, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
{'agent': {'messages': [AIMessage(content='Continue', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 3, 'prompt_tokens': 1207, 'total_tokens': 1210, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 1152}}, 'model_provider': 'openai', 'model_name': 'gpt-4.1-2025-04-14', 'system_fingerprint': 'fp_b9041e10b4', 'id': 'chatcmpl-DChBKqyDd2dds6IpHzpiRoRVDSl8n', 'prompt_filter_results': [{'prompt_index': 0, 'content_filter_results': {'hate': {'filtered': False, 'severity': 'safe'}, 'jailbreak': {'filtered': False, 'detected': False}, 'self_harm': {'filtered': False, 'severity': 'safe'}, 'sexual': {'filtered': False, 'severity': 'safe'}, 'violence': {'filtered': False, 'severity': 'safe'}}}], 'finish_reason': 'stop', 'logprobs': None, 'content_filter_results': {'hate': {'filtered': False, 'severity': 'safe'}, 'protected_material_code': {'filtered': False, 'detected': False}, 'protected_material_text': {'filtered': False, 'detected': False}, 'self_harm': {'filtered': False, 'severity': 'safe'}, 'sexual': {'filtered': False, 'severity': 'safe'}, 'violence': {'filtered': False, 'severity': 'safe'}}}, id='lc_run--019c8e8f-8cbc-7bf0-b371-25441d1cad12-0', tool_calls=[], invalid_tool_calls=[], usage_metadata={'input_tokens': 1207, 'output_tokens': 3, 'total_tokens': 1210, 'input_token_details': {'audio': 0, 'cache_read': 1152}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
{'agent': {'messages': [AIMessage(content='Continue', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 3, 'prompt_tokens': 1212, 'total_tokens': 1215, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 1152}}, 'model_provider': 'openai', 'model_name': 'gpt-4.1-2025-04-14', 'system_fingerprint': 'fp_b9041e10b4', 'id': 'chatcmpl-DChBMGQOamUKnwDGpLO4HOHl1wxXL', 'prompt_filter_results': [{'prompt_index': 0, 'content_filter_results': {'hate': {'filtered': False, 'severity': 'safe'}, 'jailbreak': {'filtered': False, 'detected': False}, 'self_harm': {'filtered': False, 'severity': 'safe'}, 'sexual': {'filtered': False, 'severity': 'safe'}, 'violence': {'filtered': False, 'severity': 'safe'}}}], 'finish_reason': 'stop', 'logprobs': None, 'content_filter_results': {'hate': {'filtered': False, 'severity': 'safe'}, 'protected_material_code': {'filtered': False, 'detected': False}, 'protected_material_text': {'filtered': False, 'detected': False}, 'self_harm': {'filtered': False, 'severity': 'safe'}, 'sexual': {'filtered': False, 'severity': 'safe'}, 'violence': {'filtered': False, 'severity': 'safe'}}}, id='lc_run--019c8e8f-9456-77f0-b0bb-9596b00106eb-0', tool_calls=[], invalid_tool_calls=[], usage_metadata={'input_tokens': 1212, 'output_tokens': 3, 'total_tokens': 1215, 'input_token_details': {'audio': 0, 'cache_read': 1152}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
{'agent': {'messages': [AIMessage(content='Continue', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 3, 'prompt_tokens': 1217, 'total_tokens': 1220, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 1152}}, 'model_provider': 'openai', 'model_name': 'gpt-4.1-2025-04-14', 'system_fingerprint': 'fp_b9041e10b4', 'id': 'chatcmpl-DChBNfMhtqztbBJy5fUyYVSttKGom', 'prompt_filter_results': [{'prompt_index': 0, 'content_filter_results': {'hate': {'filtered': False, 'severity': 'safe'}, 'jailbreak': {'filtered': False, 'detected': False}, 'self_harm': {'filtered': False, 'severity': 'safe'}, 'sexual': {'filtered': False, 'severity': 'safe'}, 'violence': {'filtered': False, 'severity': 'safe'}}}], 'finish_reason': 'stop', 'logprobs': None, 'content_filter_results': {'hate': {'filtered': False, 'severity': 'safe'}, 'protected_material_code': {'filtered': False, 'detected': False}, 'protected_material_text': {'filtered': False, 'detected': False}, 'self_harm': {'filtered': False, 'severity': 'safe'}, 'sexual': {'filtered': False, 'severity': 'safe'}, 'violence': {'filtered': False, 'severity': 'safe'}}}, id='lc_run--019c8e8f-9a85-74c3-b2fc-4081cf7915ea-0', tool_calls=[], invalid_tool_calls=[], usage_metadata={'input_tokens': 1217, 'output_tokens': 3, 'total_tokens': 1220, 'input_token_details': {'audio': 0, 'cache_read': 1152}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
{'agent': {'messages': [AIMessage(content='Continue', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 3, 'prompt_tokens': 1222, 'total_tokens': 1225, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 1152}}, 'model_provider': 'openai', 'model_name': 'gpt-4.1-2025-04-14', 'system_fingerprint': 'fp_b9041e10b4', 'id': 'chatcmpl-DChBPzFXZxqhlbVe9ZbMzPuO5wbnI', 'prompt_filter_results': [{'prompt_index': 0, 'content_filter_results': {'hate': {'filtered': False, 'severity': 'safe'}, 'jailbreak': {'filtered': False, 'detected': False}, 'self_harm': {'filtered': False, 'severity': 'safe'}, 'sexual': {'filtered': False, 'severity': 'safe'}, 'violence': {'filtered': False, 'severity': 'safe'}}}], 'finish_reason': 'stop', 'logprobs': None, 'content_filter_results': {'hate': {'filtered': False, 'severity': 'safe'}, 'protected_material_code': {'filtered': False, 'detected': False}, 'protected_material_text': {'filtered': False, 'detected': False}, 'self_harm': {'filtered': False, 'severity': 'safe'}, 'sexual': {'filtered': False, 'severity': 'safe'}, 'violence': {'filtered': False, 'severity': 'safe'}}}, id='lc_run--019c8e8f-9f55-7ef2-a6f4-6f0b52cd976f-0', tool_calls=[], invalid_tool_calls=[], usage_metadata={'input_tokens': 1222, 'output_tokens': 3, 'total_tokens': 1225, 'input_token_details': {'audio': 0, 'cache_read': 1152}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
{'agent': {'messages': [AIMessage(content='Continue', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 3, 'prompt_tokens': 1227, 'total_tokens': 1230, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 1152}}, 'model_provider': 'openai', 'model_name': 'gpt-4.1-2025-04-14', 'system_fingerprint': 'fp_b9041e10b4', 'id': 'chatcmpl-DChBQ0fQ13pMIbs1BJA5tWvzTrj0a', 'prompt_filter_results': [{'prompt_index': 0, 'content_filter_results': {'hate': {'filtered': False, 'severity': 'safe'}, 'jailbreak': {'filtered': False, 'detected': False}, 'self_harm': {'filtered': False, 'severity': 'safe'}, 'sexual': {'filtered': False, 'severity': 'safe'}, 'violence': {'filtered': False, 'severity': 'safe'}}}], 'finish_reason': 'stop', 'logprobs': None, 'content_filter_results': {'hate': {'filtered': False, 'severity': 'safe'}, 'protected_material_code': {'filtered': False, 'detected': False}, 'protected_material_text': {'filtered': False, 'detected': False}, 'self_harm': {'filtered': False, 'severity': 'safe'}, 'sexual': {'filtered': False, 'severity': 'safe'}, 'violence': {'filtered': False, 'severity': 'safe'}}}, id='lc_run--019c8e8f-a38a-7500-8770-4085dc0b3bf9-0', tool_calls=[], invalid_tool_calls=[], usage_metadata={'input_tokens': 1227, 'output_tokens': 3, 'total_tokens': 1230, 'input_token_details': {'audio': 0, 'cache_read': 1152}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
{'agent': {'messages': [AIMessage(content='Continue', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 3, 'prompt_tokens': 1232, 'total_tokens': 1235, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 1152}}, 'model_provider': 'openai', 'model_name': 'gpt-4.1-2025-04-14', 'system_fingerprint': 'fp_b9041e10b4', 'id': 'chatcmpl-DChBRM0Vu7z66E6VokWyCSlwoksCG', 'prompt_filter_results': [{'prompt_index': 0, 'content_filter_results': {'hate': {'filtered': False, 'severity': 'safe'}, 'jailbreak': {'filtered': False, 'detected': False}, 'self_harm': {'filtered': False, 'severity': 'safe'}, 'sexual': {'filtered': False, 'severity': 'safe'}, 'violence': {'filtered': False, 'severity': 'safe'}}}], 'finish_reason': 'stop', 'logprobs': None, 'content_filter_results': {'hate': {'filtered': False, 'severity': 'safe'}, 'protected_material_code': {'filtered': False, 'detected': False}, 'protected_material_text': {'filtered': False, 'detected': False}, 'self_harm': {'filtered': False, 'severity': 'safe'}, 'sexual': {'filtered': False, 'severity': 'safe'}, 'violence': {'filtered': False, 'severity': 'safe'}}}, id='lc_run--019c8e8f-a7e1-71d2-9c73-4f1728a6a1d2-0', tool_calls=[], invalid_tool_calls=[], usage_metadata={'input_tokens': 1232, 'output_tokens': 3, 'total_tokens': 1235, 'input_token_details': {'audio': 0, 'cache_read': 1152}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
{'agent': {'messages': [AIMessage(content='Continue', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 3, 'prompt_tokens': 1237, 'total_tokens': 1240, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 1152}}, 'model_provider': 'openai', 'model_name': 'gpt-4.1-2025-04-14', 'system_fingerprint': 'fp_b9041e10b4', 'id': 'chatcmpl-DChBSOk8MjYPR4bDoesyntflzJuWh', 'prompt_filter_results': [{'prompt_index': 0, 'content_filter_results': {'hate': {'filtered': False, 'severity': 'safe'}, 'jailbreak': {'filtered': False, 'detected': False}, 'self_harm': {'filtered': False, 'severity': 'safe'}, 'sexual': {'filtered': False, 'severity': 'safe'}, 'violence': {'filtered': False, 'severity': 'safe'}}}], 'finish_reason': 'stop', 'logprobs': None, 'content_filter_results': {'hate': {'filtered': False, 'severity': 'safe'}, 'protected_material_code': {'filtered': False, 'detected': False}, 'protected_material_text': {'filtered': False, 'detected': False}, 'self_harm': {'filtered': False, 'severity': 'safe'}, 'sexual': {'filtered': False, 'severity': 'safe'}, 'violence': {'filtered': False, 'severity': 'safe'}}}, id='lc_run--019c8e8f-ac53-7131-99d2-f9f8c743ea6f-0', tool_calls=[], invalid_tool_calls=[], usage_metadata={'input_tokens': 1237, 'output_tokens': 3, 'total_tokens': 1240, 'input_token_details': {'audio': 0, 'cache_read': 1152}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
{'agent': {'messages': [AIMessage(content='Continue', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 3, 'prompt_tokens': 1242, 'total_tokens': 1245, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 1152}}, 'model_provider': 'openai', 'model_name': 'gpt-4.1-2025-04-14', 'system_fingerprint': 'fp_b9041e10b4', 'id': 'chatcmpl-DChBTTAeF5YUVEuWHtF4sHt0GTiHu', 'prompt_filter_results': [{'prompt_index': 0, 'content_filter_results': {'hate': {'filtered': False, 'severity': 'safe'}, 'jailbreak': {'filtered': False, 'detected': False}, 'self_harm': {'filtered': False, 'severity': 'safe'}, 'sexual': {'filtered': False, 'severity': 'safe'}, 'violence': {'filtered': False, 'severity': 'safe'}}}], 'finish_reason': 'stop', 'logprobs': None, 'content_filter_results': {'hate': {'filtered': False, 'severity': 'safe'}, 'protected_material_code': {'filtered': False, 'detected': False}, 'protected_material_text': {'filtered': False, 'detected': False}, 'self_harm': {'filtered': False, 'severity': 'safe'}, 'sexual': {'filtered': False, 'severity': 'safe'}, 'violence': {'filtered': False, 'severity': 'safe'}}}, id='lc_run--019c8e8f-b0e4-75c0-a826-ededbd1e5dd4-0', tool_calls=[], invalid_tool_calls=[], usage_metadata={'input_tokens': 1242, 'output_tokens': 3, 'total_tokens': 1245, 'input_token_details': {'audio': 0, 'cache_read': 1152}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
{'agent': {'messages': [AIMessage(content='Continue', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 3, 'prompt_tokens': 1247, 'total_tokens': 1250, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 1152}}, 'model_provider': 'openai', 'model_name': 'gpt-4.1-2025-04-14', 'system_fingerprint': 'fp_b9041e10b4', 'id': 'chatcmpl-DChBU3q3GBjkZNLTn5cQyFMvYMveC', 'prompt_filter_results': [{'prompt_index': 0, 'content_filter_results': {'hate': {'filtered': False, 'severity': 'safe'}, 'jailbreak': {'filtered': False, 'detected': False}, 'self_harm': {'filtered': False, 'severity': 'safe'}, 'sexual': {'filtered': False, 'severity': 'safe'}, 'violence': {'filtered': False, 'severity': 'safe'}}}], 'finish_reason': 'stop', 'logprobs': None, 'content_filter_results': {'hate': {'filtered': False, 'severity': 'safe'}, 'protected_material_code': {'filtered': False, 'detected': False}, 'protected_material_text': {'filtered': False, 'detected': False}, 'self_harm': {'filtered': False, 'severity': 'safe'}, 'sexual': {'filtered': False, 'severity': 'safe'}, 'violence': {'filtered': False, 'severity': 'safe'}}}, id='lc_run--019c8e8f-b5b7-7023-9c18-0d120f206aee-0', tool_calls=[], invalid_tool_calls=[], usage_metadata={'input_tokens': 1247, 'output_tokens': 3, 'total_tokens': 1250, 'input_token_details': {'audio': 0, 'cache_read': 1152}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
{'agent': {'messages': [AIMessage(content='Continue', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 3, 'prompt_tokens': 1252, 'total_tokens': 1255, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 1152}}, 'model_provider': 'openai', 'model_name': 'gpt-4.1-2025-04-14', 'system_fingerprint': 'fp_b9041e10b4', 'id': 'chatcmpl-DChBWqbaBAxX0pofu5GGlDHNWr9m4', 'prompt_filter_results': [{'prompt_index': 0, 'content_filter_results': {'hate': {'filtered': False, 'severity': 'safe'}, 'jailbreak': {'filtered': False, 'detected': False}, 'self_harm': {'filtered': False, 'severity': 'safe'}, 'sexual': {'filtered': False, 'severity': 'safe'}, 'violence': {'filtered': False, 'severity': 'safe'}}}], 'finish_reason': 'stop', 'logprobs': None, 'content_filter_results': {'hate': {'filtered': False, 'severity': 'safe'}, 'protected_material_code': {'filtered': False, 'detected': False}, 'protected_material_text': {'filtered': False, 'detected': False}, 'self_harm': {'filtered': False, 'severity': 'safe'}, 'sexual': {'filtered': False, 'severity': 'safe'}, 'violence': {'filtered': False, 'severity': 'safe'}}}, id='lc_run--019c8e8f-ba22-70f3-9f55-044a76d96ad6-0', tool_calls=[], invalid_tool_calls=[], usage_metadata={'input_tokens': 1252, 'output_tokens': 3, 'total_tokens': 1255, 'input_token_details': {'audio': 0, 'cache_read': 1152}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
{'agent': {'messages': [AIMessage(content='Continue', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 3, 'prompt_tokens': 1257, 'total_tokens': 1260, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_provider': 'openai', 'model_name': 'gpt-4.1-2025-04-14', 'system_fingerprint': 'fp_b9041e10b4', 'id': 'chatcmpl-DChBXZN2qJUSPceKLPf0Dy1mvHKNt', 'prompt_filter_results': [{'prompt_index': 0, 'content_filter_results': {'hate': {'filtered': False, 'severity': 'safe'}, 'jailbreak': {'filtered': False, 'detected': False}, 'self_harm': {'filtered': False, 'severity': 'safe'}, 'sexual': {'filtered': False, 'severity': 'safe'}, 'violence': {'filtered': False, 'severity': 'safe'}}}], 'finish_reason': 'stop', 'logprobs': None, 'content_filter_results': {'hate': {'filtered': False, 'severity': 'safe'}, 'protected_material_code': {'filtered': False, 'detected': False}, 'protected_material_text': {'filtered': False, 'detected': False}, 'self_harm': {'filtered': False, 'severity': 'safe'}, 'sexual': {'filtered': False, 'severity': 'safe'}, 'violence': {'filtered': False, 'severity': 'safe'}}}, id='lc_run--019c8e8f-be8c-7592-add1-7574cc918bc3-0', tool_calls=[], invalid_tool_calls=[], usage_metadata={'input_tokens': 1257, 'output_tokens': 3, 'total_tokens': 1260, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
{'agent': {'messages': [AIMessage(content='Continue', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 3, 'prompt_tokens': 1262, 'total_tokens': 1265, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 1152}}, 'model_provider': 'openai', 'model_name': 'gpt-4.1-2025-04-14', 'system_fingerprint': 'fp_b9041e10b4', 'id': 'chatcmpl-DChBYC6OI7Dz46vMv6dTmzmwEmDv5', 'prompt_filter_results': [{'prompt_index': 0, 'content_filter_results': {'hate': {'filtered': False, 'severity': 'safe'}, 'jailbreak': {'filtered': False, 'detected': False}, 'self_harm': {'filtered': False, 'severity': 'safe'}, 'sexual': {'filtered': False, 'severity': 'safe'}, 'violence': {'filtered': False, 'severity': 'safe'}}}], 'finish_reason': 'stop', 'logprobs': None, 'content_filter_results': {'hate': {'filtered': False, 'severity': 'safe'}, 'protected_material_code': {'filtered': False, 'detected': False}, 'protected_material_text': {'filtered': False, 'detected': False}, 'self_harm': {'filtered': False, 'severity': 'safe'}, 'sexual': {'filtered': False, 'severity': 'safe'}, 'violence': {'filtered': False, 'severity': 'safe'}}}, id='lc_run--019c8e8f-c384-75c3-a1ec-5931cde96e07-0', tool_calls=[], invalid_tool_calls=[], usage_metadata={'input_tokens': 1262, 'output_tokens': 3, 'total_tokens': 1265, 'input_token_details': {'audio': 0, 'cache_read': 1152}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
{'agent': {'messages': [AIMessage(content='Continue', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 3, 'prompt_tokens': 1267, 'total_tokens': 1270, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 1152}}, 'model_provider': 'openai', 'model_name': 'gpt-4.1-2025-04-14', 'system_fingerprint': 'fp_b9041e10b4', 'id': 'chatcmpl-DChBZ4TE1hKEUJ5Nq5fgNFFLAs52X', 'prompt_filter_results': [{'prompt_index': 0, 'content_filter_results': {'hate': {'filtered': False, 'severity': 'safe'}, 'jailbreak': {'filtered': False, 'detected': False}, 'self_harm': {'filtered': False, 'severity': 'safe'}, 'sexual': {'filtered': False, 'severity': 'safe'}, 'violence': {'filtered': False, 'severity': 'safe'}}}], 'finish_reason': 'stop', 'logprobs': None, 'content_filter_results': {'hate': {'filtered': False, 'severity': 'safe'}, 'protected_material_code': {'filtered': False, 'detected': False}, 'protected_material_text': {'filtered': False, 'detected': False}, 'self_harm': {'filtered': False, 'severity': 'safe'}, 'sexual': {'filtered': False, 'severity': 'safe'}, 'violence': {'filtered': False, 'severity': 'safe'}}}, id='lc_run--019c8e8f-c816-7b13-bf94-6d53e763c78e-0', tool_calls=[], invalid_tool_calls=[], usage_metadata={'input_tokens': 1267, 'output_tokens': 3, 'total_tokens': 1270, 'input_token_details': {'audio': 0, 'cache_read': 1152}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
{'agent': {'messages': [AIMessage(content='Continue', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 3, 'prompt_tokens': 1272, 'total_tokens': 1275, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 1152}}, 'model_provider': 'openai', 'model_name': 'gpt-4.1-2025-04-14', 'system_fingerprint': 'fp_b9041e10b4', 'id': 'chatcmpl-DChBazoVMR2CCvTsvBB5HMUn2vcHJ', 'prompt_filter_results': [{'prompt_index': 0, 'content_filter_results': {'hate': {'filtered': False, 'severity': 'safe'}, 'jailbreak': {'filtered': False, 'detected': False}, 'self_harm': {'filtered': False, 'severity': 'safe'}, 'sexual': {'filtered': False, 'severity': 'safe'}, 'violence': {'filtered': False, 'severity': 'safe'}}}], 'finish_reason': 'stop', 'logprobs': None, 'content_filter_results': {'hate': {'filtered': False, 'severity': 'safe'}, 'protected_material_code': {'filtered': False, 'detected': False}, 'protected_material_text': {'filtered': False, 'detected': False}, 'self_harm': {'filtered': False, 'severity': 'safe'}, 'sexual': {'filtered': False, 'severity': 'safe'}, 'violence': {'filtered': False, 'severity': 'safe'}}}, id='lc_run--019c8e8f-cccd-7192-8815-b8fcc3bb850d-0', tool_calls=[], invalid_tool_calls=[], usage_metadata={'input_tokens': 1272, 'output_tokens': 3, 'total_tokens': 1275, 'input_token_details': {'audio': 0, 'cache_read': 1152}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}}
^CTraceback (most recent call last):
  File "/usr/lib/python3.11/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.11/asyncio/base_events.py", line 653, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File "/home/Jarvis/Musaddique/project_root/email_intent_agent/langgraph_client.py", line 113, in main
    async for step in graph.astream(
  File "/home/Jarvis/Musaddique/project_root/venv/lib/python3.11/site-packages/langgraph/pregel/main.py", line 2974, in astream
    async for _ in runner.atick(
  File "/home/Jarvis/Musaddique/project_root/venv/lib/python3.11/site-packages/langgraph/pregel/_runner.py", line 304, in atick
    await arun_with_retry(
  File "/home/Jarvis/Musaddique/project_root/venv/lib/python3.11/site-packages/langgraph/pregel/_retry.py", line 138, in arun_with_retry
    return await task.proc.ainvoke(task.input, config)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Jarvis/Musaddique/project_root/venv/lib/python3.11/site-packages/langgraph/_internal/_runnable.py", line 705, in ainvoke
    input = await asyncio.create_task(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Jarvis/Musaddique/project_root/venv/lib/python3.11/site-packages/langgraph/_internal/_runnable.py", line 473, in ainvoke
    ret = await self.afunc(*args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Jarvis/Musaddique/project_root/email_intent_agent/langgraph_client.py", line 82, in agent_node
    response = await llm.ainvoke([system] + state["messages"])
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Jarvis/Musaddique/project_root/venv/lib/python3.11/site-packages/langchain_core/runnables/base.py", line 5704, in ainvoke
    return await self.bound.ainvoke(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Jarvis/Musaddique/project_root/venv/lib/python3.11/site-packages/langchain_core/language_models/chat_models.py", line 425, in ainvoke
    llm_result = await self.agenerate_prompt(
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Jarvis/Musaddique/project_root/venv/lib/python3.11/site-packages/langchain_core/language_models/chat_models.py", line 1132, in agenerate_prompt
    return await self.agenerate(
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/Jarvis/Musaddique/project_root/venv/lib/python3.11/site-packages/langchain_core/language_models/chat_models.py", line 1052, in agenerate
    results = await asyncio.gather(
              ^^^^^^^^^^^^^^^^^^^^^
  File "/home/Jarvis/Musaddique/project_root/venv/lib/python3.11/site-packages/langchain_core/language_models/chat_models.py", line 1359, in _agenerate_with_cache
    result = await self._agenerate(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Jarvis/Musaddique/project_root/venv/lib/python3.11/site-packages/langchain_openai/chat_models/base.py", line 1627, in _agenerate
    raw_response = await self.async_client.with_raw_response.create(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Jarvis/Musaddique/project_root/venv/lib/python3.11/site-packages/openai/_legacy_response.py", line 381, in wrapped
    return cast(LegacyAPIResponse[R], await func(*args, **kwargs))
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Jarvis/Musaddique/project_root/venv/lib/python3.11/site-packages/openai/resources/chat/completions/completions.py", line 2678, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
  File "/home/Jarvis/Musaddique/project_root/venv/lib/python3.11/site-packages/openai/_base_client.py", line 1884, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Jarvis/Musaddique/project_root/venv/lib/python3.11/site-packages/openai/_base_client.py", line 1604, in request
    response = await self._client.send(
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Jarvis/Musaddique/project_root/venv/lib/python3.11/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Jarvis/Musaddique/project_root/venv/lib/python3.11/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Jarvis/Musaddique/project_root/venv/lib/python3.11/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Jarvis/Musaddique/project_root/venv/lib/python3.11/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Jarvis/Musaddique/project_root/venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Jarvis/Musaddique/project_root/venv/lib/python3.11/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/home/Jarvis/Musaddique/project_root/venv/lib/python3.11/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Jarvis/Musaddique/project_root/venv/lib/python3.11/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Jarvis/Musaddique/project_root/venv/lib/python3.11/site-packages/httpcore/_async/http11.py", line 136, in handle_async_request
    raise exc
  File "/home/Jarvis/Musaddique/project_root/venv/lib/python3.11/site-packages/httpcore/_async/http11.py", line 106, in handle_async_request
    ) = await self._receive_response_headers(**kwargs)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Jarvis/Musaddique/project_root/venv/lib/python3.11/site-packages/httpcore/_async/http11.py", line 177, in _receive_response_headers
    event = await self._receive_event(timeout=timeout)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Jarvis/Musaddique/project_root/venv/lib/python3.11/site-packages/httpcore/_async/http11.py", line 217, in _receive_event
    data = await self._network_stream.read(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Jarvis/Musaddique/project_root/venv/lib/python3.11/site-packages/httpcore/_backends/anyio.py", line 35, in read
    return await self._stream.receive(max_bytes=max_bytes)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Jarvis/Musaddique/project_root/venv/lib/python3.11/site-packages/anyio/streams/tls.py", line 244, in receive
    data = await self._call_sslobject_method(self._ssl_object.read, max_bytes)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Jarvis/Musaddique/project_root/venv/lib/python3.11/site-packages/anyio/streams/tls.py", line 187, in _call_sslobject_method
    data = await self.transport_stream.receive()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Jarvis/Musaddique/project_root/venv/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 1269, in receive
    await self._protocol.read_event.wait()
  File "/usr/lib/python3.11/asyncio/locks.py", line 213, in wait
    await fut
asyncio.exceptions.CancelledError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/Jarvis/Musaddique/project_root/email_intent_agent/langgraph_client.py", line 121, in <module>
    asyncio.run(main())
  File "/usr/lib/python3.11/asyncio/runners.py", line 190, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.11/asyncio/runners.py", line 123, in run
    raise KeyboardInterrupt()
KeyboardInterrupt

(venv) Jarvis@JarvisPhase2:~/Musaddique/project_root/email_intent_agent$ 
